---
layout: post
title: 深入理解 java 虚拟机(4)
date: 2018-08-20 20:12:15
categories: 
- jvm
tags:
- java
- jvm
description: 深入理解 Java 虚拟机:JVM高级特性与最佳实践 读书笔记
---
# 虚拟机执行子系统
## 类文件结构
## 虚拟机类加载机制
### 概述
虚拟机把描述类的数据从 class 文件加载到内存,并对数据进行校验,转换解析和初始化,最终形成可以被虚拟机直接使用的 Java 类型,这就是虚拟机的类加载机制.

类型的加载和连接过程都是在程序运行期间完成的.
### 类加载的时机
类从被加载到虚拟机的内存中开始,到卸载出内存为止,它的整个生命周期包括了: 加载(Loading), 验证(Verification), 准备(Preparation),解析(Resolution),初始化(Initialization),使用(Using),卸载(Unloading) 七个阶段.

验证,准备,解析三个部分统称为连接.

有且只有四种情况必须立即对类进行"初始化"
1. 遇到 new,getstatic,putstatic,invokestatic 这4条字节码指令时, 如果类没有进行过初始化,则需要先触发类的初始化.
2. 使用 java.lang.reflect 包的方法对类进行反射调用的时候,如果类没有进行过初始化,则需要先触发类的初始化.
3. 当初始化一个类的时候,如果发现其父类还没有初始化,则需要先执行其父类的初始化.
4. 当虚拟机启动时,用户需要指定一个执行的主类,虚拟机会先初始化这个类.


### 类加载器
- 启动类加载器
- 扩展类加载器
- 应用程序类加载器

## 虚拟机字节码执行引擎



**未完待续...**